<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cykj.mapper.MenuInfMapper" >
  <resultMap id="BaseResultMap" type="com.cykj.bean.MenuInf" >
    <id column="menuId" property="menuid" jdbcType="INTEGER" />
    <result column="menuName" property="menuname" jdbcType="VARCHAR" />
    <result column="pid" property="pid" jdbcType="INTEGER" />
    <result column="url" property="url" jdbcType="VARCHAR" />
  </resultMap>
<!--查询角色拥有的菜单-->
  <select id="findMenuByRole" resultType="MenuInf" parameterType="int">
        select m.* from t_power p , t_menu m where p.menuId = m.menuId and m.pid= #{menuId} and p.state=1 and p.roleId=2;
  </select>
<!--查询父菜单-->
    <select id="findByPid" resultType="MenuInf">
        select m2.* from t_power p , t_menu m,t_menu m2 where p.menuId = m.menuId  and m.pid=m2.menuId group by m.pid;
    </select>

  <select id="powerByRole" parameterType="int" resultType="Power">
        select * from t_Power where roleId=#{roleId}
    </select>

</mapper>